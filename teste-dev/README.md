
# Parking CRUD (React + .NET 8 + PostgreSQL)

## Requisitos
- Node 18+
- .NET SDK 8
- PostgreSQL 13+ em `localhost:5432`

Crie o banco (se necessário):
```sql
CREATE DATABASE postgres;
```
Rode o script abaixo para criação e população de tabelas:
```sql
CREATE TABLE IF NOT EXISTS public."Clients" (
  "Id"      integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "Name"    varchar(120) NOT NULL,
  "Phone"   varchar(30)
);

CREATE TABLE IF NOT EXISTS public."Vehicles" (
  "Id"        integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "Brand"     varchar(60) NOT NULL,
  "Model"     varchar(60) NOT NULL,
  "Plate"     varchar(20) NOT NULL,
  "ClientId"  integer NULL,
  CONSTRAINT "UQ_Vehicles_Plate" UNIQUE ("Plate"),
  CONSTRAINT "FK_Vehicles_Clients_ClientId"
    FOREIGN KEY ("ClientId") REFERENCES public."Clients"("Id")
    ON DELETE SET NULL
);

--cria o user da aplicação
CREATE USER adm WITH PASSWORD '1234';

-- Permissões apenas nas tabelas
GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE "Clients" TO adm;
GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE "Vehicles" TO adm;

-- Permissões nas sequences usadas pelas colunas Id
GRANT USAGE, SELECT, UPDATE ON SEQUENCE "Clients_Id_seq" TO adm;
GRANT USAGE, SELECT, UPDATE ON SEQUENCE "Vehicles_Id_seq" TO adm;

GRANT ALL PRIVILEGES ON DATABASE postgres TO adm;

--carga inicial

-- Clientes
INSERT INTO "Clients" ("Id","Name","Phone") VALUES
  (1,'João da Silva','11999990001'),
  (2,'Maria Oliveira','11999990002'),
  (3,'Carlos Pereira','11999990003'),
  (4,'Ana Souza','11999990004'),
  (5,'Bruno Almeida','11999990005');

-- Veículos (associados aos clientes acima)
INSERT INTO "Vehicles" ("Id","Brand","Model","Plate","ClientId") VALUES
  (1,'Volkswagen','Gol','ABC1A23',1),
  (2,'Chevrolet','Onix','DEF2B34',1),

  (3,'Fiat','Argo','GHI3C45',2),

  (4,'Hyundai','HB20','JKL4D56',3),
  (5,'Toyota','Corolla','MNO5E67',3),

  (6,'Honda','Civic','PQR6F78',4),

  (7,'Renault','Kwid','STU7G89',5);

-- Ajuste das sequences para próximos INSERTs (IDENTITY/SERIAL)
SELECT setval('"Clients_Id_seq"',  (SELECT MAX("Id") FROM "Clients"));
SELECT setval('"Vehicles_Id_seq"', (SELECT MAX("Id") FROM "Vehicles"));

```

## Como rodar

### 1) Backend
```bash
cd backend
dotnet restore
dotnet run
```
- Sobe em **http://localhost:5000**
- Swagger em **http://localhost:5000/swagger**
- Se der algum erro de dependência do Swagger, executar:
```bash
dotnet add package Swashbuckle.AspNetCore
```

### 2) Frontend
Em outro terminal:
```bash
cd frontend
npm install
npm start
```
- Abre em **http://localhost:3000**


